projects = {
  web: [
    {
      title: "My Biblio App",
      platform: "Web",
      category: "School Project",
      languages: "React.js, Node.js, SQL",
      hosting:
        "Azure Static Web Apps, Azure App Service, Azure SQL Database, Google SMTP (Nodemailer)",
      description:
        "A modern, full-stack library management system built with React, Node.js,and a SQL database." +
        "This comprehensive application provides complete functionality for managing books, users, loans, " +
        "reservations, and administrative tasks in a digital library environment.",
      images: [
        "ASSETS/image/project/biblioweb1.webp",
        "ASSETS/image/project/biblioweb2.webp",
        "ASSETS/image/project/biblioweb3.webp",
        "ASSETS/image/project/biblioweb4.webp",
        "ASSETS/image/project/biblioweb5.webp",
        "ASSETS/image/project/biblioweb6.webp",
        "ASSETS/image/project/biblioweb7.webp",
        "ASSETS/image/project/biblioweb8.webp",
      ],
      links: {
        "GitHub Repository": "https://github.com/JonathanBYSanon/my-biblio-app",
        "Live Website": "https://black-tree-032c8c00f.2.azurestaticapps.net",
      },
    },
    {
      title: "Yogpila",
      platform: "Web",
      category: "School Project",
      languages: "Next.js",
      hosting: "Vercel",
      description:
        "A web application for a sports complex, built with Next.js" +
        " The purpose was to learn about the next.js framework and go deeper into the frontend of web applications." +
        " The application includes a landing page, a calendar system and a working contact form.",
      images: [
        "ASSETS/image/project/yogpila1.webp",
        "ASSETS/image/project/yogpila2.webp",
        "ASSETS/image/project/yogpila3.webp",
        "ASSETS/image/project/yogpila4.webp",
      ],
      links: {
        "GitHub Repository":
          "https://github.com/JonathanBYSanon/complex-sportif",
        "Live Website": "https://complex-sportif.vercel.app/",
      },
    },
    {
      title: "Green Data",
      platform: "Web",
      category: "School Project",
      languages: "HTML, CSS, JavaScript, SQL",
      hosting: "GitHub Pages, Azure SQL Database, Power BI",
      description:
        "GreenData is a web platform designed to visualize climate data in Canada from 2019 to 2024. The project combines a relational database for structured storage of climate metrics with Power BI dashboards to highlight key trends in temperature, CO₂ emissions, and precipitation. The data is integrated into a responsive interface built with HTML, CSS, JavaScript, and Tailwind CSS, and deployed on GitHub Pages for accessible presentation.",
      images: [
        "ASSETS/image/project/greendata1.webp",
        "ASSETS/image/project/greendata2.webp",
        "ASSETS/image/project/greendata3.webp",
        "ASSETS/image/project/greendata4.webp",
        "ASSETS/image/project/greendata5.webp",
      ],
      links: {
        "GitHub Repository": "https://github.com/JonathanBYSanon/ClimateCanada",
        "Live Website": "https://jonathanbysanon.github.io/ClimateCanada/",
      },
    },
    {
      title: "IntroWebCourse",
      platform: "Web",
      category: "Personal Project",
      languages: "HTML5, CSS3, JavaScript ES6+",
      hosting:
        "GitHub Pages, Google Forms, Google Sheets, Google Classroom, Google Scripts",
      description:
        "IntroWebCourse is a modern, responsive landing page designed for a web programming course targeting young people in Haiti. The site features a clean, accessible design with dark/light theme switching, smooth animations, and intelligent geolocation-based registration system. Built with semantic HTML5, CSS Grid/Flexbox, and vanilla JavaScript using modern ES6+ patterns including classes and modules.",
      images: [
        "ASSETS/image/project/introwebcourse1.webp",
        "ASSETS/image/project/introwebcourse2.webp",
        "ASSETS/image/project/introwebcourse3.webp",
        "ASSETS/image/project/introwebcourse4.webp",
      ],
      links: {
        "GitHub Repository":
          "https://github.com/JonathanBYSanon/IntroWebCourse",
        "Live Website": "https://jonathanbysanon.github.io/IntroWebCourse/",
      },
    },
    {
      title: "Tijwet",
      platform: "Web",
      category: "Personal Project",
      languages: "HTML, CSS, JavaScript",
      hosting: "GitHub Pages",
      description:
        "Tijwet is a web-based platform offering a collection of simple and engaging games designed for collaborative play. Each game operates as an independent HTML page, ensuring modularity and flexibility. The platform emphasizes accessibility and ease of use, allowing users to quickly start games without complex setups.",
      images: [
        "ASSETS/image/project/tijwet1.webp",
        "ASSETS/image/project/tijwet2.webp",
        "ASSETS/image/project/tijwet3.webp",
      ],
      links: {
        "GitHub Repository": "https://github.com/JonathanBYSanon/Tijwet",
        "Live Website": "https://tijwet.com",
      },
    },
    {
      title: "Car dealership",
      platform: "Web",
      category: "School Project",
      languages: "Node.js, Vue.js, SQL",
      description:
        "A web application for a car dealership, built with Node.js and Vue.js with a SQL database." +
        " The purpose was to learn about web server development and front-end frameworks." +
        " The application includes a user management system with authentication, token management, password encryption, and a car management system with CRUD operations.",
      images: [
        "ASSETS/image/project/car-dealership-login.webp",
        "ASSETS/image/project/car-dealership-home.webp",
        "ASSETS/image/project/car-dealership-management.webp",
        "ASSETS/image/project/car-dealership-modification.webp",
      ],
      links: {
        "Back-end GitHub Repository":
          "https://github.com/JonathanBYSanon/Projet_Concessionaire",
        "Front-end Github Repository":
          "https://github.com/JonathanBYSanon/Projet_Concessionaire_Frontend",
      },
    },

    // Other web projects...
  ],
  desktop: [
    {
      title: "Le Banquier",
      platform: "Desktop",
      category: "Personal Project",
      languages: "C#, WPF",
      description:
        "Le Banquier is a desktop game inspired by the television show 'Deal or No Deal'. Developed using C# and WPF, the game features a clean MVVM architecture, engaging animations, and a dynamic offer system. Notably, the application has been adopted by the school's student association for events and activities, enhancing student engagement and entertainment.",
      images: [
        "ASSETS/image/project/le-banquier1.webp",
        "ASSETS/image/project/le-banquier2.webp",
        "ASSETS/image/project/le-banquier3.webp",
        "ASSETS/image/project/le-banquier4.webp",
        "ASSETS/image/project/le-banquier5.webp",
      ],
      links: {
        "GitHub Repository":
          "https://github.com/JonathanBYSanon/LE_BANQUIER_VF",
        "Installer (MSI)":
          "https://github.com/JonathanBYSanon/LE_BANQUIER_VF/releases/tag/v1.0.0",
      },
    },
    {
      title: "Letter Clash",
      platform: "Desktop",
      category: "Personal Project",
      languages: "C#, WPF",
      description:
        "Letter Clash is a two-player (1v1) desktop game developed using C# and WPF. Players compete in real-time to form words, aiming to outscore their opponent within a time limit. The game integrates an external API and employs web scraping techniques for words validation, ensuring accurate and up-to-date word definitions for both English and French languages. This app is also used by the school's student association for events and activities, enhancing student engagement and entertainment.",
      images: [
        "ASSETS/image/project/letter-clash1.webp",
        "ASSETS/image/project/letter-clash2.webp",
        "ASSETS/image/project/letter-clash3.webp",
        "ASSETS/image/project/letter-clash4.webp",
      ],
      links: {
        "GitHub Repository": "https://github.com/JonathanBYSanon/LETTER_FIGHT",
        "Installer (MSI)":
          "https://github.com/JonathanBYSanon/LETTER_FIGHT/releases/tag/v1.0.0",
      },
    },
  ],
  mobile: [
    {
      title: "My Biblio app Mobile",
      platform: "Mobile",
      category: "School Project",
      languages: "Swift UI",
      description:
        "Biblio Mobile is a simpler mobile version of the My Biblio App. It includes functions for managing library activities." +
        "It allows users to browse books, manage reservations, view their profile, and track their borrowing history. Admin and Librarian can use it to view their dashboard" +
        "Most of the backend logic is through the parent project API",
      images: [
        "ASSETS/image/project/bibliomobile1.webp",
        "ASSETS/image/project/bibliomobile2.webp",
        "ASSETS/image/project/bibliomobile3.webp",
        "ASSETS/image/project/bibliomobile4.webp",
        "ASSETS/image/project/bibliomobile5.webp",
        "ASSETS/image/project/bibliomobile6.webp",
        "ASSETS/image/project/bibliomobile7.webp",
        "ASSETS/image/project/bibliomobile8.webp",
        "ASSETS/image/project/bibliomobile9.webp",
      ],
      links: {
        "GitHub Repository":
          "https://github.com/JonathanBYSanon/MyBiblioAppMobile",
        "Parent project Github Repository":
          "https://github.com/JonathanBYSanon/my-biblio-app",
      },
    },
  ],
};

function renderProjects(category = "all") {
  const template = document.getElementById("project-card-template");
  const container = document.querySelector(".project-section");
  container.innerHTML = ""; // Clear existing projects

  if (category === "all") {
    // Render all projects
    for (const cat in projects) {
      projects[cat].forEach((project) => {
        appendProjectCard(project, template, container);
      });
    }
  } else if (projects[category]) {
    // Render projects of the selected category
    projects[category].forEach((project) => {
      appendProjectCard(project, template, container);
    });
  }
}

function appendProjectCard(project, template, container) {
  const clone = document.importNode(template.content, true);

  const imagesSlider = clone.querySelector(".images-slider");
  const sliderNavigation = clone.querySelector(".slider-navigation");

  project.images.forEach((src, index) => {
    // Create and append image
    const img = document.createElement("img");
    img.src = src;
    img.alt = `${project.title} screenshot ${index + 1}`;
    img.classList.add("slide");
    if (index === 0) img.classList.add("chosen"); // Show the first image by default

    // Add click event to open image in new tab
    img.addEventListener("click", () => {
      window.open(src, "_blank");
    });

    imagesSlider.appendChild(img);

    // Create and append navigation button
    const button = document.createElement("button");
    button.textContent = index + 1;
    button.classList.add("nav-button");
    if (index === 0) button.classList.add("chosen");

    //add the image index to the button
    button.dataset.imageIndex = index;

    button.addEventListener("click", () => {
      const sliderWrapper = button.closest(".slider-wrapper");
      const images = sliderWrapper.querySelectorAll(".slide");
      const buttons = sliderWrapper.querySelectorAll(".nav-button");

      images.forEach((img) => img.classList.remove("chosen"));
      buttons.forEach((btn) => btn.classList.remove("chosen"));

      button.classList.add("chosen");

      const imageIndex = Array.from(buttons).indexOf(button);

      if (images[imageIndex]) {
        images[imageIndex].classList.add("chosen");
      }

      // Scroll the active button into view on mobile
      const navigation = button.closest(".slider-navigation");
      if (navigation && window.innerWidth <= 767) {
        button.scrollIntoView({
          behavior: "smooth",
          block: "nearest",
          inline: "center",
        });
      }
    });

    sliderNavigation.appendChild(button);
  });

  // Populate project information table
  const table = clone.querySelector(".project-info");
  const details = [
    { label: "Title", value: project.title },
    { label: "Platform", value: project.platform },
    { label: "Category", value: project.category },
    { label: "Languages", value: project.languages },
    { label: "Description", value: project.description },
    { label: "Hosting", value: project.hosting || "N/A" },
    {
      label: "Links",
      value: Object.entries(project.links)
        .map(([text, url]) => `<a href="${url}" target="_blank">${text}</a>`)
        .join(" ● "),
    },
  ];

  details.forEach((detail) => {
    const tr = document.createElement("tr");
    const th = document.createElement("th");
    th.textContent = `${detail.label}:`;
    const td = document.createElement("td");
    td.innerHTML = detail.value;
    tr.appendChild(th);
    tr.appendChild(td);
    table.appendChild(tr);
  });

  container.appendChild(clone);
}

renderProjects();

// Event listener for category selection
document
  .getElementById("categorySelect")
  .addEventListener("change", function () {
    renderProjects(this.value);
  });
